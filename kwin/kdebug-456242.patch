From abbbc0b72c6b4d120a1912ad07be870b2da8e7ef Mon Sep 17 00:00:00 2001
From: Nate Graham <nate@kde.org>
Date: Tue, 5 Jul 2022 08:25:54 -0600
Subject: [PATCH] WindowHeapDelegate: add tooltip and accessibility info to
 close button

BUG: 456242
FIXED-IN: 5.26
---
 src/effects/private/qml/WindowHeapDelegate.qml | 8 ++++++++
 1 file changed, 8 insertions(+)

diff --git a/src/effects/private/qml/WindowHeapDelegate.qml b/src/effects/private/qml/WindowHeapDelegate.qml
index 0e17a14fd6..4ef16b620f 100644
--- a/src/effects/private/qml/WindowHeapDelegate.qml
+++ b/src/effects/private/qml/WindowHeapDelegate.qml
@@ -366,10 +366,18 @@ Item {
             topMargin: PlasmaCore.Units.smallSpacing
         }
         LayoutMirroring.enabled: Qt.application.layoutDirection === Qt.RightToLeft
+        text: i18ndc("kwin_effects", "@info:tooltip as in: 'close this window'", "Close window")
         icon.name: "window-close"
         implicitWidth: PlasmaCore.Units.iconSizes.medium
         implicitHeight: implicitWidth
         onClicked: thumb.client.closeWindow();
+
+        display: PC3.AbstractButton.IconOnly
+
+        PC3.ToolTip.text: text
+        PC3.ToolTip.visible: hovered && display === PC3.AbstractButton.IconOnly
+        PC3.ToolTip.delay: Kirigami.Units.toolTipDelay
+        Accessible.name: text
     }
 
     Component.onDestruction: {
-- 
GitLab

